<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/x5gon.css" />
  </head>

  <body>
    <script src="https://cdn.jsdelivr.net/npm/vue@latest/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuex@3.1.2/dist/vuex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-router@3.1.4/dist/vue-router.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/http-vue-loader@1.4.1/src/httpVueLoader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@5.15.0/dist/d3.min.js"></script>
    <script src="https://unpkg.com/panzoom@8.7.3/dist/panzoom.min.js"></script>
    <script src="./js/lib/vue-panzoom.min.js"></script>

    <div id="q-app">
      <router-view class="view"></router-view>
      <nav id="main-navbar">
        <router-link to="/">/home</router-link>
        <router-link to="/search">/search</router-link>
        <router-link to="/overview">/overview</router-link>
        <router-link to="/basket">/basket</router-link>
        <router-link to="/sequence">/sequence</router-link>
        <router-link to="/debug">/debug</router-link>
      </nav>
      <x5gon-notification></x5gon-notification>
    </div>
  </body>

  <script type="module">
    // TODO: refactor this code into App component

    Vue.use(VueRouter);
    Vue.use(Vuex);

    import store from './js/Store.js';

    import constant from './js/Constants.js';
    Vue.prototype.$constant = constant;

    const router = new VueRouter({
        routes: [
            { path: '/', component: httpVueLoader('js/Home.vue') },
            { path: '/search', component: httpVueLoader('js/Search.vue') },
            { path: '/overview/:id?', component: httpVueLoader('js/Overview.vue') },
            { path: '/basket', component: httpVueLoader('js/Basket.vue') },
            { path: '/sequence', component: httpVueLoader('js/Sequence.vue') },
            { path: '/debug', component: httpVueLoader('js/Debug.vue') },
        ]
    });

    var app = new Vue({
        router: router,
        store: store,
        el: '#q-app',
        components: {
            'x5gon-notification': httpVueLoader('js/Notification.vue'),
        },
    });

    window.app = app;
  </script>
</body>
</html>
